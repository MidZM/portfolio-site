<!DOCTYPE html>
<html lang="en">
<head>
    <title>Games</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" integrity="sha384-VCmXjywReHh4PwowAiWNagnWcLhlEJLA5buUprzK8rxFgeH0kww/aWY76TfkUoSX" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../node_modules/@fortawesome/fontawesome-free/css/all.css">
    <link rel="stylesheet" type="text/css" href="../css/styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark-cus sticky-top">
        <a class="navbar-brand" href="../index.html"><img src="../images/MascotAvatar-Flipped.png" width="65" height="65"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTop" aria-controls="navbarTop" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTop">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../gallery.html">Gallery</a>
                </li>
                <li class="nav-item dropdown active">
                      <a class="dropbtn nav-link dropdown-toggle" href="../projects.html">Projects</a>
                      <div class="p-0 m-0 dropdown-menu bg-dark-cus border" aria-labelledby="navbarDropdownMenuLink">
                        <a class="text-center dropdown-item text-white-cus border-bottom" href="websites.html">Websites</a>
                        <a class="text-center dropdown-item text-white-cus border-bottom" href="games.html">Games <span class="sr-only">(current)</span></a>
                        <a class="text-center dropdown-item text-white-cus border-bottom" href="webcomics.html">Webcomics</a>
                        <a class="text-center dropdown-item text-white-cus" href="animations.html">Animations</a>
                      </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../about.html">About</a>
                </li>
              </ul>
        </div>
    </nav>

    <!-- Grid -->
    <div class="container m-0 p-0 h-sm-100 navbar-expand-sm navbar-dark">
        <button class="navbar-toggler mt-2 mb-2 ml-2" type="button" data-toggle="collapse" data-target="#siteNames" aria-controls="siteNames" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Left Side Bar Background Hackaround -->
        <div class="row h-sm-100 d-none d-sm-block m-0 collapse navbar-collapse position-absolute w-100">
            <div class="col-sm-3 h-100 p-0 bg-dark-cus text-center border-sm-right-2"></div>
        </div>

        <!-- Left Side Bar -->
        <div id="siteNames" class="row h-sm-100 m-0 collapse navbar-collapse position-absolute w-100">
            <div class="col-sm-3 p-0 bg-dark-cus text-center border-sm-right-2" style="z-index: 6;">
                <div class="container">
                    <div class="row">
                            <a href="#" onclick="replaceWebsites(this)" class="col-sm-12 nav-link text-a-cus font-2 active" data-name="Symbiotic"><h4>Visual Novel</h4></a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Images -->
        <div class="row m-0 position-absolute w-100 scrollDiv galleryDiv">
            <div class="d-none d-sm-block col-sm-3"></div>
            <div class="col col-sm-9">
                <div class="container p-3">
                    <div class="row">
                        <div class="col-12 text-light text-center mb-3">
                            <h1>Games</h1>
                        </div>
                    </div>
                    <div class="column-1">
                        <div id="siteList" class="column-2">
                            <div class="site-cont" data-num="0" data-name="Symbiotic">
                                <img class="img-fluid img-thumbnail image" src="../images/Symbiotic/Cover_Full.jpg">
                                <div class="middle">
                                    <div class="text">Symbiotic</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalAria" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-cus" role="document">
            <div class="modal-content bg-dark-cus text-light">
                <div class="modal-header">
                <h5 class="modal-title" id="imageModalTitle"></h5>
                <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body p-0">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="media align-items-center">
                                <div id="site-holder" class="col-12 col-lg-6 text-center border-lg-right-2" style="display: block;">
                                    <button type="button" class="btn btn-secondary" style="height: 100px" onclick="prevSite()"><i class="fa fa-angle-left"></i></button>
                                    <img id="imageModalImg" class="img-fluid w-75 p-3 img-fluid-cus" src="" alt="">
                                    <button type="button" class="btn btn-secondary" style="height: 100px" onclick="nextSite()"><i class="fa fa-angle-right"></i></button>
                                </div>

                                <div id="site-holder-full" class="site-holder row col-12 align-items-center justify-content-center text-center" style="display: none;">
                                    <button type="button" class="btn btn-secondary mr-3 btn-full-left-cus" onclick="prevSite()"><i class="fa fa-angle-left"></i></button>
                                    <span className="panel_gallery helper"></span>
                                    <img id="imageModalImgFull" class="panel_gallery img-fluid p-3 img-fluid-cus" src="" alt="">
                                    <button type="button" class="btn btn-secondary ml-3 btn-full-right-cus" onclick="nextSite()"><i class="fa fa-angle-right"></i></button>
                                </div>

                                <div class="d-none d-lg-block col-12 col-lg-6 text-left">
                                    <h3>About:</h3>
                                    <p class="siteModalDesc"></p>
                                    <h3>Engine Used:</h3>
                                    <p class="siteModalEng"></p>
                                </div>
                            </div>
                        </div>

                        <div class="row d-block d-lg-none pt-3 border-top">
                            <div class="col-12 col-lg-6 align-self-center text-left">
                                <h3>About:</h3>
                                <p class="siteModalDesc"></p>
                                <h3>Engine Used:</h3>
                                <p class="siteModalEng"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js" integrity="sha384-XEerZL0cuoUbHE4nZReLT7nx9gQrQreJekYhJD9WNWhH8nEW+0c5qq7aIo2Wl30J" crossorigin="anonymous"></script>
    <script src="../js/fading.js"></script>
    <script src="../node_modules/animejs/lib/anime.min.js"></script>

    <script>
        let sites = document.querySelectorAll('.site-cont');
        const img = document.querySelector('#imageModalImg');
        const imgFull = document.querySelector('#imageModalImgFull');
        const title = document.querySelector('#imageModalTitle');
        const desc = document.querySelectorAll('.siteModalDesc');
        const eng = document.querySelectorAll('.siteModalEng');
        const siteArr = {
            Symbiotic: [
                {
                    img: "Cover_Full.jpg",
                    title: "Symbiotic",
                    about: "The Z-Archives (Zone Archives) were created a long time ago to archive my webcomics, art, and projects. The site was abandoned in favor of using this site as my portfolio instead.",
                    eng: "CloudNovel"
                }
            ]
        };

        let name = "";
        let nameArr = "";
        let currentNum = 0;
        let canPress = false;
        let webDesc;
        let webEng;

        const siteCont = document.getElementById('siteList');

        function clickSite() {
            name = $(this).data('name');
            nameArr = siteArr[name];
            currentNum = parseInt($(this).data('num'));
            canPress = true;
            webDesc = nameArr[$(this).data('num')].about;
            webEng = nameArr[$(this).data('num')].eng;

            $('#imageModalTitle').html(nameArr[$(this).data('num')].title);
            $('#imageModalImg').attr('src', `../images/${$(this).data('name')}/${nameArr[$(this).data('num')].img}`);
            $('#imageModalImgFull').attr('src', `../images/${$(this).data('name')}/${nameArr[$(this).data('num')].img}`);
            $('.siteModalDesc').html(webDesc);
            $('.siteModalEng').html(webEng);

            $('#imageModal').modal("show");
        }

        let animDelay = 0;
        for (let i = 0; i < sites.length; i++) {
            sites[i].addEventListener('click', clickSite);
            animDelay = animDelay + 50;
            anime({
                targets: sites[i],
                duration: 750,
                delay: animDelay,
                opacity: 1,
                scale: [1, 1.2, 1],
                easing: 'easeInOutSine'
            });
        }

        function replaceWebsites(e) {
            const prevActive = document.querySelector('.nav-link.text-a-cus.active');
            const thisActive = e;
            for (let i = 0; i < sites.length; i++) {
                sites[i].removeEventListener('click', clickSite);
                $(sites[i]).remove();
            }

            $('#siteNames').collapse('hide');
            
            prevActive.classList.remove('active');
            thisActive.classList.add('active');

            nameArr = siteArr[e.dataset.name];
            for (let x = 0; x < nameArr.length; x++) {
                const node = $(`
                    <div class="site-cont" data-num="${x}" data-name="${e.dataset.name}">
                        <img class="img-fluid img-thumbnail image" src="../images/${e.dataset.name}/${nameArr[x].img}">
                        <div class="middle">
                            <div class="text">${nameArr[x].title}</div>
                        </div>
                    </div>
                `);
                $(siteCont).append(node);
            }
            sites = document.querySelectorAll('.site-cont');

            animDelay = 0;
            for (let i = 0; i < sites.length; i++) {
                sites[i].addEventListener('click', clickSite);
                animDelay = animDelay + 50;
                anime({
                    targets: sites[i],
                    duration: 750,
                    delay: animDelay,
                    opacity: 1,
                    scale: [1, 1.2, 1],
                    easing: 'easeInOutSine'
                });
            }
        }

        function prevSite() {
            if (currentNum === 0) {
                currentNum = nameArr.length-1;
            } else {
                --currentNum;
            }
            canPress = false;
            webDesc = nameArr[currentNum].about;
            webEng = nameArr[currentNum].eng;
            
            FX.fadeOut(img, {
                duration: 500,
                complete: function() {
                    $('#imageModalTitle').html(nameArr[currentNum].title);
                    $('#imageModalImg').attr('src', `../images/${name}/${nameArr[currentNum].img}`);
                    $('.siteModalDesc').html(webDesc);
                    $('.siteModalEng').html(webEng);
                    
                    FX.fadeIn(img, {
                        duration: 500,
                        complete: function(){
                            canPress = true;
                        }
                    })
                }
            });
            FX.fadeOut(title, { duration: 500, complete: function() {FX.fadeIn(title, { duration: 500 })} });
            for (let i = 0; i < desc.length; i++) FX.fadeOut(desc[i], { duration: 500, complete: function() {FX.fadeIn(desc[i], { duration: 500 })} });
            for (let i = 0; i < eng.length; i++) FX.fadeOut(eng[i], { duration: 500, complete: function() {FX.fadeIn(eng[i], { duration: 500 })} });
        }

        function nextSite() {
            if (currentNum === nameArr.length-1) {
                currentNum = 0;
            } else {
                currentNum++;
            }
            canPress = false;
            webDesc = nameArr[currentNum].about;
            webEng = nameArr[currentNum].eng;

            FX.fadeOut(img, {
                duration: 500,
                complete: function() {
                    $('#imageModalTitle').html(nameArr[currentNum].title);
                    $('#imageModalImg').attr('src', `../images/${name}/${nameArr[currentNum].img}`);
                    $('.siteModalDesc').html(webDesc);
                    $('.siteModalEng').html(webEng);

                    FX.fadeIn(img, {
                        duration: 500,
                        complete: function(){
                            canPress = true;
                        }
                    })
                }
            });
            FX.fadeOut(title, { duration: 500, complete: function() {FX.fadeIn(title, { duration: 500 })} });
            for (let i = 0; i < desc.length; i++) FX.fadeOut(desc[i], { duration: 500, complete: function() {FX.fadeIn(desc[i], { duration: 500 })} });
            for (let i = 0; i < eng.length; i++) FX.fadeOut(eng[i], { duration: 500, complete: function() {FX.fadeIn(eng[i], { duration: 500 })} });
        }
    </script>

</body>
</html>